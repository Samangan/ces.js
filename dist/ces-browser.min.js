var CES=function(){return function(){var e=function(t,n){var i=e.resolve(t,n||"/"),r=e.modules[i];if(!r)throw Error("Failed to resolve module "+t+", tried "+i);var o=e.cache[i],s=o?o.exports:r();return s};e.paths=[],e.modules={},e.cache={},e.extensions=[".js",".coffee",".json"],e._core={assert:!0,events:!0,fs:!0,path:!0,vm:!0},e.resolve=function(){return function(t,n){function i(t){if(t=a.normalize(t),e.modules[t])return t;for(var n=0;e.extensions.length>n;n++){var i=e.extensions[n];if(e.modules[t+i])return t+i}}function r(t){t=t.replace(/\/+$/,"");var n=a.normalize(t+"/package.json");if(e.modules[n]){var r=e.modules[n](),o=r.browserify;if("object"==typeof o&&o.main){var s=i(a.resolve(t,o.main));if(s)return s}else if("string"==typeof o){var s=i(a.resolve(t,o));if(s)return s}else if(r.main){var s=i(a.resolve(t,r.main));if(s)return s}}return i(t+"/index")}function o(e,t){for(var n=s(t),o=0;n.length>o;o++){var a=n[o],u=i(a+"/"+e);if(u)return u;var f=r(a+"/"+e);if(f)return f}var u=i(e);return u?u:void 0}function s(e){var t;t="/"===e?[""]:a.normalize(e).split("/");for(var n=[],i=t.length-1;i>=0;i--)if("node_modules"!==t[i]){var r=t.slice(0,i+1).join("/")+"/node_modules";n.push(r)}return n}if(n||(n="/"),e._core[t])return t;var a=e.modules.path();n=a.resolve("/",n);var u=n||"/";if(t.match(/^(?:\.\.?\/|\/)/)){var f=i(a.resolve(u,t))||r(a.resolve(u,t));if(f)return f}var c=o(t,u);if(c)return c;throw Error("Cannot find module '"+t+"'")}}(),e.alias=function(t,n){var i=e.modules.path(),r=null;try{r=e.resolve(t+"/package.json","/")}catch(o){r=e.resolve(t,"/")}for(var s=i.dirname(r),a=(Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t})(e.modules),u=0;a.length>u;u++){var f=a[u];if(f.slice(0,s.length+1)===s+"/"){var c=f.slice(s.length);e.modules[n+c]=e.modules[s+c]}else f===s&&(e.modules[n]=e.modules[s])}},function(){var t={},n="undefined"!=typeof window?window:{},i=!1;e.define=function(r,o){!i&&e.modules.__browserify_process&&(t=e.modules.__browserify_process(),i=!0);var s=e._core[r]?"":e.modules.path().dirname(r),a=function(t){var n=e(t,s),i=e.cache[e.resolve(t,s)];return i&&null===i.parent&&(i.parent=u),n};a.resolve=function(t){return e.resolve(t,s)},a.modules=e.modules,a.define=e.define,a.cache=e.cache;var u={id:r,filename:r,exports:{},loaded:!1,parent:null};e.modules[r]=function(){return e.cache[r]=u,o.call(u.exports,a,u,u.exports,s,r,t,n),u.loaded=!0,u.exports}}}(),e.define("path",function(e,t,n,i,r,o){function s(e,t){for(var n=[],i=0;e.length>i;i++)t(e[i],i,e)&&n.push(e[i]);return n}function a(e,t){for(var n=0,i=e.length;i>=0;i--){var r=e[i];"."==r?e.splice(i,1):".."===r?(e.splice(i,1),n++):n&&(e.splice(i,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}var u=/^(.+\/(?!$)|\/)?((?:.+?)?(\.[^.]*)?)$/;n.resolve=function(){for(var e="",t=!1,n=arguments.length;n>=-1&&!t;n--){var i=n>=0?arguments[n]:o.cwd();"string"==typeof i&&i&&(e=i+"/"+e,t="/"===i.charAt(0))}return e=a(s(e.split("/"),function(e){return!!e}),!t).join("/"),(t?"/":"")+e||"."},n.normalize=function(e){var t="/"===e.charAt(0),n="/"===e.slice(-1);return e=a(s(e.split("/"),function(e){return!!e}),!t).join("/"),e||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e},n.join=function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(s(e,function(e){return e&&"string"==typeof e}).join("/"))},n.dirname=function(e){var t=u.exec(e)[1]||"",n=!1;return t?1===t.length||n&&3>=t.length&&":"===t.charAt(1)?t:t.substring(0,t.length-1):"."},n.basename=function(e,t){var n=u.exec(e)[2]||"";return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},n.extname=function(e){return u.exec(e)[3]||""},n.relative=function(e,t){function i(e){for(var t=0;e.length>t&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=n.resolve(e).substr(1),t=n.resolve(t).substr(1);for(var r=i(e.split("/")),o=i(t.split("/")),s=Math.min(r.length,o.length),a=s,u=0;s>u;u++)if(r[u]!==o[u]){a=u;break}for(var f=[],u=a;r.length>u;u++)f.push("..");return f=f.concat(o.slice(a)),f.join("/")}}),e.define("__browserify_process",function(e,t,n,i,r,o){var o=t.exports={};o.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(t){var n=[];return window.addEventListener("message",function(e){if(e.source===window&&"browserify-tick"===e.data&&(e.stopPropagation(),n.length>0)){var t=n.shift();t()}},!0),function(e){n.push(e),window.postMessage("browserify-tick","*")}}return function(e){setTimeout(e,0)}}(),o.title="browser",o.browser=!0,o.env={},o.argv=[],o.binding=function(t){if("evals"===t)return e("vm");throw Error("No such module. (Possibly not yet loaded)")},function(){var t,n="/";o.cwd=function(){return n},o.chdir=function(i){t||(t=e("path")),n=t.resolve(i,n)}}()}),e.define("/src/class.js",function(e,t){var n=!1,i=/xyz/.test(function(){})?/\b_super\b/:/.*/,r=t.exports=function(){};r.extend=function(e){function t(){!n&&this.init&&this.init.apply(this,arguments)}var r=this.prototype;n=!0;var o=new this;n=!1;for(var s in e)o[s]="function"==typeof e[s]&&"function"==typeof r[s]&&i.test(e[s])?function(e,t){return function(){var n=this._super;this._super=r[e];var i=t.apply(this,arguments);return this._super=n,i}}(s,e[s]):e[s];return t.prototype=o,t.prototype.constructor=t,t.extend=arguments.callee,t}}),e.define("/src/component.js",function(e,t){var n=e("./class");t.exports=n.extend({name:""})}),e.define("/src/entity.js",function(e,t){var n=e("./class"),i=e("./signal"),r=t.exports=n.extend({init:function(){this.id=r._id++,this._components={},this.onComponentAdded=new i,this.onComponentRemoved=new i},hasComponent:function(e){return void 0!==this._components["$"+e]},getComponent:function(e){return this._components["$"+e]},addComponent:function(e){this._components["$"+e.name]=e,this.onComponentAdded.emit(this,e.name)},removeComponent:function(e){this._components["$"+e]=void 0,this.onComponentRemoved.emit(this,e)}});r._id=0}),e.define("/src/signal.js",function(e,t){var n=e("./class");t.exports=n.extend({init:function(){this._listeners=[]},add:function(e){this._listeners.push(e)},remove:function(e){var t,n,i=this._listeners;for(t=0,n=i.length;n>t;++t)if(i[t]===e)return i.splice(t,1),!0;return!1},emit:function(){var e,t,n=arguments,i=this._listeners;for(e=0,t=i.length;t>e;++e)i[e].apply(null,n)}})}),e.define("/src/system.js",function(e,t){var n=e("./class");t.exports=n.extend({init:function(){this.world=null},update:function(){throw Error("Subclassed should override this method")}})}),e.define("/src/world.js",function(e,t){var n=e("./class"),i=e("./family"),r=e("./entitylist");t.exports=n.extend({init:function(){this._families={},this._systems=[],this._entities=new r},addSystem:function(e){return e.world=this,this._systems.push(e),this},removeSystem:function(e){var t,n,i;for(t=this._systems,n=0,i=t.length;i>n;++n)t[n]===e&&t.splice(n,1)},addEntity:function(e){var t,n,i;t=this._families;for(n in t)t[n].addEntityIfMatch(e);i=this,e.onComponentAdded.add(function(e,t){i._onComponentAdded(e,t)}),e.onComponentRemoved.add(function(e,t){i._onComponentRemoved(e,t)}),this._entities.add(e)},removeEntity:function(e){var t,n;t=this._families;for(n in t)t[n].removeEntity(e);this._entities.remove(e)},getEntities:function(){var e,t,n;if(e="$"+Array.prototype.join.call(arguments,","),t=this._families,!t[e])for(t[e]=new i(Array.prototype.slice.call(arguments)),n=this._entities.head;n;n=n.next)t[e].addEntityIfMatch(n.entity);return t[e].getEntities()},update:function(e){var t,n,i;for(t=this._systems,n=0,i=t.length;i>n;++n)t[n].update(e)},_onComponentAdded:function(e,t){var n,i;n=this._families;for(i in n)n[i].onComponentAdded(e,t)},_onComponentRemoved:function(e,t){var n,i;n=this._families;for(i in n)n[i].onComponentRemoved(e,t)}})}),e.define("/src/family.js",function(e,t){var n=e("./class"),i=e("./entitylist");t.exports=n.extend({init:function(e){this._componentNames=e,this._entities=new i},getEntities:function(){return this._entities.toArray()},addEntityIfMatch:function(e){!this._entities.has(e)&&this._matchEntity(e)&&this._entities.add(e)},removeEntity:function(e){this._entities.remove(e)},onComponentAdded:function(e){this.addEntityIfMatch(e)},onComponentRemoved:function(e,t){var n,i,r;if(this._entities.has(e))for(n=this._componentNames,i=0,r=n.length;r>i;++i)n[i]===t&&this._entities.remove(e)},_matchEntity:function(e){var t,n,i;for(t=this._componentNames,n=0,i=t.length;i>n;++n)if(!e.hasComponent(t[n]))return!1;return!0}})}),e.define("/src/entitylist.js",function(e,t){var n=e("./class"),i=n.extend({init:function(e){this.entity=e,this.prev=null,this.next=null}});t.exports=n.extend({init:function(){this.head=null,this.tail=null,this.length=0,this._entities={}},add:function(e){var t=new i(e);null===this.head?this.head=this.tail=t:(t.prev=this.tail,this.tail.next=t,this.tail=t),this.length+=1,this._entities[e.id]=t},remove:function(e){var t=this._entities[e.id];void 0!==t&&(null===t.prev?this.head=t.next:t.prev.next=t.next,null===t.next?this.tail=t.prev:t.next.prev=t.prev,this.length-=1,delete this._entities[e.id])},has:function(e){return void 0!==this._entities[e.id]},clear:function(){this.head=this.tail=null,this.length=0,this._entities={}},toArray:function(){var e,t;for(e=[],t=this.head;t;t=t.next)e.push(t.entity);return e}})}),e.define("/index.js",function(e,t){t.exports={Class:e("./src/class"),Component:e("./src/component"),Entity:e("./src/entity"),System:e("./src/system"),World:e("./src/world")}}),e("/index.js")}(),require("/index.js")}();